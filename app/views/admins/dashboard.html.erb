<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Admin Dashboard</title>
</head>
<body id="page-top">
    <header class="masthead bg-secondary text-white text-center">
            <div class="container d-flex align-items-center flex-column">

                <!-- Masthead Heading-->
                <h1 class="masthead-heading text-uppercase mb-0"><p></p></h1>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                
                <div class="container mt-4">
    <h2 class="mb-4">Admin Dashboard</h2>

    <div class="row mb-4">
      <div class="col">
        <h3>Students Currently Timed-in</h3>
        <table class="all-students-table">
          <thead>
            <tr>
              <th>Student</th>
              <th>Time In Time</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <% @students_in.each do |student| %>
              <% last_attendance = student.attendances.last %>
              <% if last_attendance && last_attendance.time_in %>
                <tr>
                  <td><%= student.name %></td>
                  <td><%= last_attendance.time_in.strftime('%Y-%m-%d %H:%M:%S') %></td>
                  <td><%= last_attendance.purpose || 'N/A' %></td>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="col">
        <h3>Students Who Timed Out</h3>
        <table class="all-students-table">
          <thead>
            <tr>
              <th>Student</th>
              <th>Time Out Time</th>
            </tr>
          </thead>
          <tbody>
            <% @students_out.each do |student| %>
              <% last_attendance = student.attendances.last %>
              <% if last_attendance && last_attendance.time_out %>
                <tr>
                  <td><%= student.name %></td>
                  <td><%= last_attendance.time_out.strftime('%Y-%m-%d %H:%M:%S') %></td>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mb-4">
      <%= link_to 'New Student', users_students_new_path, class: 'btn btn-success me-2' %>
      <%= link_to 'All Students', admins_all_students_path, class: 'btn btn-success me-2' %>
      <%= link_to 'Time-In History', admins_time_in_history_path, class: 'btn btn-info me-2' %>
      <%= link_to 'Time-Out History', admins_time_out_history_path, class: 'btn btn-info me-2' %>
      <%= link_to 'Logout', admins_logout_path, class: 'btn btn-danger' %>
                
                
    </div>
  </div>
</body>
</html>
